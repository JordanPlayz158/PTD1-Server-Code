<?php

namespace App\Http\Controllers;

use App\Models\Pokemon;
use App\Models\GameCornerPokemon;
use App\Models\Save;
use Carbon\Carbon;
use Illuminate\Support\Facades\Auth;
use Illuminate\Database\Eloquent\Relations\HasMany;

class GameCornerController extends Controller
{
    public static $pokemons = [
            '1' => ['var_27' => 5,'name' => "Bulbasaur",'var_26' => 64,'var_16' => 45,'var_30' => 49,'var_23' => 49,'var_28' => 65,'var_24' => 65,'speed' => 45,'types' => [1,2,],'moves' => [1,],'unlocked_moves' => ['33' => [157,],'3' => [5,],'37' => [183,],'7' => [9,],'9' => [16,],'13' => [24,],'14' => [26,],'15' => [27,],'19' => [28,],'21' => [76,],'25' => [91,],'27' => [127,],'31' => [149,],],],
            '4' => ['var_27' => 5,'name' => "Charmander",'var_26' => 62,'var_16' => 39,'var_30' => 52,'var_23' => 43,'var_28' => 60,'var_24' => 50,'speed' => 65,'types' => [4,],'moves' => [6,5,],'unlocked_moves' => ['16' => [29,],'34' => [130,],'19' => [30,],'37' => [184,],'7' => [10,],'25' => [92,],'10' => [17,],'43' => [105,],'28' => [106,],'46' => [242,],],],
            '10' => ['var_27' => 2,'name' => "Caterpie",'var_26' => 39,'var_16' => 45,'var_30' => 30,'var_23' => 35,'var_28' => 20,'var_24' => 20,'speed' => 45,'types' => [7,],'moves' => [1,7,],'unlocked_moves' => ['15' => [13,],],],
            '13' => ['var_27' => 2,'name' => "Weedle",'var_26' => 39,'var_16' => 40,'var_30' => 35,'var_23' => 30,'var_28' => 20,'var_24' => 20,'speed' => 50,'types' => [7,2,],'moves' => [8,7,],'unlocked_moves' => ['15' => [13,],],],
            '16' => ['var_27' => 2,'name' => "Pidgey",'var_26' => 50,'var_16' => 40,'var_30' => 45,'var_23' => 40,'var_28' => 35,'var_24' => 35,'speed' => 56,'types' => [5,6,],'moves' => [1,],'unlocked_moves' => ['33' => [75,],'5' => [2,],'37' => [158,],'9' => [15,],'41' => [145,],'13' => [4,],'45' => [78,],'17' => [36,],'49' => [246,],'21' => [77,],'53' => [318,],'25' => [95,],'29' => [97,],],],
            '19' => ['var_27' => 2,'name' => "Rattata",'var_26' => 57,'var_16' => 30,'var_30' => 56,'var_23' => 35,'var_28' => 25,'var_24' => 35,'speed' => 72,'types' => [5,],'moves' => [1,3,],'unlocked_moves' => ['16' => [34,],'34' => [167,],'19' => [35,],'4' => [4,],'22' => [84,],'7' => [12,],'25' => [96,],'10' => [19,],'28' => [136,],'13' => [33,],'31' => [127,],],],
            '21' => ['var_27' => 4,'name' => "Spearow",'var_26' => 58,'var_16' => 40,'var_30' => 60,'var_23' => 30,'var_28' => 31,'var_24' => 31,'speed' => 70,'types' => [5,6,],'moves' => [42,5,],'unlocked_moves' => ['17' => [44,],'33' => [158,],'5' => [43,],'21' => [78,],'37' => [185,],'9' => [21,],'25' => [97,],'13' => [33,],'29' => [96,],],],
            '23' => ['var_27' => 5,'name' => "Ekans",'var_26' => 62,'var_16' => 35,'var_30' => 60,'var_23' => 44,'var_28' => 40,'var_24' => 54,'speed' => 55,'types' => [2,],'moves' => [70,43,],'unlocked_moves' => ['33' => [159,],'4' => [8,],'36' => [172,],'9' => [19,],'41' => [221,],'12' => [71,],'44' => [241,],'17' => [72,],'49' => [288,],'20' => [73,],'25' => [98,],'26' => [124,],'27' => [126,],'28' => [137,],],],
            '25' => ['var_27' => 5,'name' => "Pikachu",'var_26' => 82,'var_16' => 35,'var_30' => 55,'var_23' => 30,'var_28' => 50,'var_24' => 40,'speed' => 90,'types' => [11,],'moves' => [5,22,],'unlocked_moves' => ['18' => [41,],'34' => [168,],'50' => [202,],'5' => [3,],'21' => [79,],'37' => [97,],'8' => [23,],'26' => [125,],'42' => [219,],'13' => [4,],'29' => [142,],'45' => [212,],],],
            '27' => ['var_27' => 5,'name' => "Sandshrew",'var_26' => 93,'var_16' => 50,'var_30' => 75,'var_23' => 85,'var_28' => 20,'var_24' => 30,'speed' => 40,'types' => [14,],'moves' => [6,],'unlocked_moves' => ['33' => [160,],'3' => [25,],'19' => [46,],'21' => [68,],'37' => [186,],'7' => [2,],'9' => [8,],'25' => [55,],'27' => [128,],'13' => [32,],'15' => [69,],'31' => [130,],],],
            '29' => ['var_27' => 6,'name' => "Nidoran F",'var_26' => 59,'var_16' => 55,'var_30' => 47,'var_23' => 52,'var_28' => 40,'var_24' => 40,'speed' => 41,'types' => [2,],'moves' => [5,6,],'unlocked_moves' => ['33' => [161,],'19' => [46,],'21' => [19,],'37' => [84,],'7' => [3,],'9' => [45,],'25' => [99,],'13' => [8,],'45' => [188,],'31' => [94,],],],
            '32' => ['var_27' => 6,'name' => "Nidoran M",'var_26' => 60,'var_16' => 46,'var_30' => 57,'var_23' => 40,'var_28' => 40,'var_24' => 40,'speed' => 50,'types' => [2,],'moves' => [43,42,],'unlocked_moves' => ['33' => [161,],'19' => [21,],'21' => [80,],'37' => [182,],'7' => [12,],'9' => [45,],'25' => [99,],'13' => [8,],'45' => [275,],'31' => [94,],],],
            '35' => ['var_27' => 8,'name' => "Clefairy",'var_26' => 68,'var_16' => 70,'var_30' => 45,'var_23' => 48,'var_28' => 60,'var_24' => 65,'speed' => 35,'types' => [5,],'moves' => [48,5,],'unlocked_moves' => ['34' => [58,],'4' => [60,],'37' => [187,],'7' => [47,],'40' => [163,],'10' => [61,],'43' => [239,],'13' => [25,],'46' => [212,],'16' => [62,],'49' => [292,],'19' => [63,],'52' => [304,],'22' => [86,],'55' => [322,],'28' => [138,],'31' => [113,],],],
            '37' => ['var_27' => 8,'name' => "Vulpix",'var_26' => 63,'var_16' => 38,'var_30' => 41,'var_23' => 40,'var_28' => 50,'var_24' => 65,'speed' => 65,'types' => [4,],'moves' => [10,],'unlocked_moves' => ['34' => [169,],'4' => [3,],'37' => [184,],'7' => [101,],'11' => [4,],'44' => [242,],'14' => [105,],'17' => [81,],'51' => [302,],'21' => [49,],'54' => [203,],'24' => [106,],'27' => [129,],'31' => [151,],],],
          
            '39' => ['var_27' => 8,'name' => "Jigglypuff",'var_26' => 76,'var_16' => 115,'var_30' => 45,'var_23' => 20,'var_28' => 45,'var_24' => 25,'speed' => 20,'types' => [5,],'moves' => [47,],'unlocked_moves' => ['33' => [114,],'5' => [25,],'37' => [160,],'9' => [48,],'41' => [86,],'13' => [49,],'45' => [214,],'17' => [50,],'49' => [291,],'21' => [68,],'53' => [127,],'25' => [61,],'29' => [143,],],],
           
            '41' => ['var_27' => 8,'name' => "Zubat",'var_26' => 54,'var_16' => 40,'var_30' => 45,'var_23' => 35,'var_28' => 30,'var_24' => 40,'speed' => 55,'types' => [2,6,],'moves' => [54,],'unlocked_moves' => ['17' => [75,],'33' => [162,],'5' => [38,],'21' => [81,],'37' => [188,],'9' => [74,],'25' => [100,],'41' => [221,],'13' => [19,],'45' => [246,],],],
          
            '46' => ['var_27' => 8,'name' => "Paras",'var_26' => 70,'var_16' => 35,'var_30' => 70,'var_23' => 55,'var_28' => 45,'var_24' => 55,'speed' => 25,'types' => [7,1,],'moves' => [6,],'unlocked_moves' => ['17' => [55,],'33' => [91,],'49' => [166,],'6' => [37,],'22' => [87,],'38' => [189,],'54' => [268,],'7' => [24,],'11' => [54,],'27' => [130,],'43' => [235,],],],
          
            '48' => ['var_27' => 10,'name' => "Venonat",'var_26' => 75,'var_16' => 60,'var_30' => 55,'var_23' => 50,'var_28' => 40,'var_24' => 55,'speed' => 45,'types' => [7,2,],'moves' => [1,49,227,],'unlocked_moves' => ['17' => [54,],'35' => [265,],'5' => [38,],'37' => [223,],'23' => [37,],'25' => [89,],'41' => [188,],'11' => [20,],'13' => [24,],'29' => [26,],'47' => [148,],],],
          
            '50' => ['var_27' => 10,'name' => "Diglett",'var_26' => 81,'var_16' => 10,'var_30' => 55,'var_23' => 25,'var_28' => 35,'var_24' => 45,'speed' => 95,'types' => [14,],'moves' => [6,2,],'unlocked_moves' => ['18' => [155,],'34' => [207,],'4' => [5,],'37' => [130,],'7' => [74,],'23' => [35,],'40' => [194,],'26' => [159,],'12' => [217,],'29' => [206,],'45' => [276,],'15' => [67,],],],
           
            '52' => ['var_27' => 10,'name' => "Meowth",'var_26' => 69,'var_16' => 40,'var_30' => 45,'var_23' => 35,'var_28' => 40,'var_24' => 40,'speed' => 90,'types' => [5,],'moves' => [6,5,],'unlocked_moves' => ['17' => [72,],'33' => [130,],'49' => [181,],'6' => [19,],'22' => [176,],'38' => [191,],'9' => [175,],'25' => [177,],'41' => [96,],'14' => [46,],'30' => [178,],],],
          
            '54' => ['var_27' => 100,'name' => "Psyduck",'var_26' => 80,'var_16' => 50,'var_30' => 52,'var_23' => 48,'var_28' => 65,'var_24' => 50,'speed' => 55,'types' => [3,],'moves' => [6,109,],'unlocked_moves' => ['35' => [339,],'5' => [3,],'40' => [210,],'9' => [31,],'44' => [223,],'14' => [49,],'48' => [337,],'18' => [20,],'53' => [193,],'22' => [93,],'57' => [377,],'27' => [46,],'31' => [72,],],],
          
            '56' => ['var_27' => 8,'name' => "Mankey",'var_26' => 74,'var_16' => 40,'var_30' => 80,'var_23' => 35,'var_28' => 35,'var_24' => 45,'speed' => 70,'types' => [13,],'moves' => [6,51,43,12,],'unlocked_moves' => ['17' => [53,],'33' => [164,],'49' => [290,],'21' => [72,],'37' => [190,],'53' => [320,],'9' => [46,],'25' => [96,],'41' => [171,],'13' => [52,],'45' => [277,],],],
            
            '58' => ['var_27' => 8,'name' => "Growlithe",'var_26' => 91,'var_16' => 55,'var_30' => 70,'var_23' => 45,'var_28' => 70,'var_24' => 50,'speed' => 60,'types' => [4,],'moves' => [19,101,],'unlocked_moves' => ['34' => [27,],'6' => [10,],'39' => [184,],'9' => [43,],'42' => [97,],'45' => [84,],'14' => [102,],'48' => [287,],'17' => [99,],'51' => [303,],'20' => [103,],'56' => [330,],'25' => [104,],'28' => [92,],'31' => [106,],],],
           
            '60' => ['var_27' => 10,'name' => "Poliwag",'var_26' => 60,'var_16' => 40,'var_30' => 50,'var_23' => 40,'var_28' => 40,'var_24' => 40,'speed' => 90,'types' => [3,],'moves' => [109,],'unlocked_moves' => ['18' => [111,],'35' => [86,],'5' => [11,],'21' => [114,],'38' => [193,],'8' => [110,],'25' => [112,],'41' => [159,],'11' => [31,],'28' => [139,],'15' => [61,],'31' => [152,],],],
           
            '66' => ['var_27' => 20,'name' => "Machop",'var_26' => 75,'var_16' => 70,'var_30' => 80,'var_23' => 50,'var_28' => 35,'var_24' => 35,'speed' => 35,'types' => [13,],'moves' => [51,43,],'unlocked_moves' => ['49' => [154,],'34' => [230,],'19' => [227,],'37' => [86,],'22' => [53,],'7' => [12,],'25' => [228,],'10' => [52,],'43' => [190,],'13' => [226,],'46' => [30,],'31' => [229,],],],
           
            '69' => ['var_27' => 8,'name' => "Bellsprout",'var_26' => 84,'var_16' => 50,'var_30' => 75,'var_23' => 35,'var_28' => 70,'var_24' => 30,'speed' => 40,'types' => [1,2,],'moves' => [16,],'unlocked_moves' => ['17' => [37,],'35' => [172,],'7' => [91,],'23' => [73,],'39' => [28,],'41' => [125,],'11' => [70,],'27' => [131,],'13' => [26,],'29' => [76,],'15' => [24,],'47' => [283,],],],
            
            '72' => ['var_27' => 20,'name' => "Tentacool",'var_26' => 105,'var_16' => 40,'var_30' => 40,'var_23' => 35,'var_28' => 50,'var_24' => 100,'speed' => 70,'types' => [3,2,],'moves' => [8,],'unlocked_moves' => ['33' => [93,],'36' => [182,],'5' => [38,],'8' => [201,],'40' => [72,],'43' => [237,],'12' => [73,],'15' => [94,],'47' => [193,],'50' => [298,],'19' => [112,],'22' => [70,],'54' => [283,],'26' => [137,],'29' => [197,],],],
           
            '74' => ['var_27' => 5,'name' => "Geodude",'var_26' => 73,'var_16' => 40,'var_30' => 80,'var_23' => 100,'var_28' => 30,'var_24' => 30,'speed' => 20,'types' => [10,14,],'moves' => [1,25,],'unlocked_moves' => ['32' => [155,],'4' => [64,],'36' => [173,],'39' => [194,],'8' => [65,],'11' => [66,],'43' => [238,],'46' => [127,],'15' => [67,],'18' => [68,],'50' => [297,],'22' => [82,],'25' => [90,],'29' => [144,],],],
           
            '77' => ['var_27' => 20,'name' => "Ponyta",'var_26' => 152,'var_16' => 50,'var_30' => 85,'var_23' => 55,'var_28' => 65,'var_24' => 65,'speed' => 90,'types' => [4,],'moves' => [1,5,],'unlocked_moves' => ['17' => [327,],'33' => [242,],'49' => [330,],'4' => [3,],'21' => [355,],'37' => [97,],'9' => [10,],'25' => [105,],'41' => [203,],'13' => [103,],'29' => [27,],'45' => [403,],],],
          
            '79' => ['var_27' => 10,'name' => "Slowpoke",'var_26' => 99,'var_16' => 90,'var_30' => 65,'var_23' => 65,'var_28' => 40,'var_24' => 40,'speed' => 15,'types' => [3,17,],'moves' => [280,340,1,],'unlocked_moves' => ['32' => [223,],'36' => [385,],'5' => [5,],'9' => [31,],'41' => [337,],'45' => [148,],'14' => [20,],'49' => [111,],'19' => [49,],'54' => [210,],'23' => [216,],'58' => [386,],'28' => [93,],],],
          
            '81' => ['var_27' => 20,'name' => "Magnemite",'var_26' => 89,'var_16' => 25,'var_30' => 35,'var_23' => 70,'var_28' => 95,'var_24' => 55,'speed' => 45,'types' => [11,9,],'moves' => [299,1,],'unlocked_moves' => ['33' => [300,],'6' => [22,],'38' => [72,],'11' => [38,],'43' => [219,],'14' => [231,],'46' => [301,],'17' => [23,],'49' => [234,],'22' => [232,],'54' => [160,],'27' => [41,],'59' => [336,],'30' => [278,],],],
          
            '83' => ['var_27' => 20,'name' => "Farfetch'd",'var_26' => 94,'var_16' => 52,'var_30' => 65,'var_23' => 55,'var_28' => 58,'var_24' => 62,'speed' => 60,'types' => [5,6,],'moves' => [182,42,2,43,55,],'unlocked_moves' => ['33' => [181,],'37' => [162,],'7' => [21,],'9' => [131,],'43' => [168,],'13' => [44,],'45' => [273,],'49' => [246,],'19' => [130,],'21' => [100,],'55' => [323,],'25' => [180,],'31' => [97,],],],
            '84' => ['var_27' => 10,'name' => "Doduo",'var_26' => 96,'var_16' => 35,'var_30' => 85,'var_23' => 45,'var_28' => 35,'var_24' => 35,'speed' => 75,'types' => [5,6,],'moves' => [42,5,],'unlocked_moves' => ['32' => [293,],'50' => [171,],'19' => [33,],'5' => [4,],'37' => [97,],'23' => [383,],'41' => [185,],'10' => [40,],'28' => [384,],'14' => [21,],'46' => [167,],],],
        
            '86' => ['var_27' => 10,'name' => "Seel",'var_26' => 100,'var_16' => 65,'var_30' => 45,'var_23' => 55,'var_28' => 45,'var_24' => 70,'speed' => 45,'types' => [3,],'moves' => [216,],'unlocked_moves' => ['33' => [328,],'3' => [5,],'37' => [27,],'7' => [109,],'41' => [408,],'11' => [407,],'43' => [133,],'13' => [60,],'47' => [346,],'17' => [345,],'51' => [129,],'21' => [143,],'53' => [409,],'23' => [261,],'27' => [260,],'31' => [378,],],],
           
            '90' => ['var_27' => 16,'name' => "Shellder",'var_26' => 97,'var_16' => 30,'var_30' => 65,'var_23' => 100,'var_28' => 45,'var_24' => 25,'speed' => 40,'types' => [3,],'moves' => [1,],'unlocked_moves' => ['32' => [371,],'4' => [18,],'37' => [260,],'8' => [38,],'40' => [372,],'44' => [328,],'13' => [369,],'16' => [83,],'49' => [165,],'20' => [43,],'52' => [346,],'56' => [373,],'25' => [370,],'28' => [345,],'61' => [193,],],],
          
            '92' => ['var_27' => 30,'name' => "Gastly",'var_26' => 95,'var_16' => 30,'var_30' => 35,'var_23' => 30,'var_28' => 100,'var_24' => 35,'speed' => 80,'types' => [8,2,],'moves' => [110,119,],'unlocked_moves' => ['33' => [309,],'19' => [81,],'36' => [310,],'22' => [35,],'40' => [311,],'26' => [169,],'43' => [237,],'12' => [280,],'29' => [308,],'15' => [307,],'47' => [254,],],],
           
            '96' => ['var_27' => 10,'name' => "Drowzee",'var_26' => 102,'var_16' => 60,'var_30' => 48,'var_23' => 45,'var_28' => 43,'var_24' => 90,'speed' => 42,'types' => [17,],'moves' => [48,110,],'unlocked_moves' => ['33' => [210,],'5' => [49,],'37' => [211,],'9' => [20,],'41' => [223,],'13' => [216,],'45' => [164,],'17' => [208,],'49' => [148,],'21' => [209,],'53' => [191,],'25' => [89,],'57' => [332,],'61' => [286,],],],
           
            '98' => ['var_27' => 20,'name' => "Krabby",'var_26' => 115,'var_16' => 30,'var_30' => 105,'var_23' => 90,'var_28' => 25,'var_24' => 25,'speed' => 50,'types' => [3,],'moves' => [64,11,],'unlocked_moves' => ['35' => [125,],'5' => [269,],'39' => [328,],'9' => [43,],'41' => [329,],'11' => [14,],'45' => [147,],'15' => [112,],'19' => [139,],'21' => [326,],'25' => [327,],'29' => [83,],'31' => [284,],],],
          
            '102' => ['var_27' => 10,'name' => "Exeggcute",'var_26' => 98,'var_16' => 60,'var_30' => 40,'var_23' => 80,'var_28' => 60,'var_24' => 45,'speed' => 40,'types' => [1,17,],'moves' => [391,383,110,],'unlocked_moves' => ['17' => [390,],'33' => [149,],'19' => [37,],'21' => [24,],'7' => [146,],'23' => [26,],'11' => [9,],'27' => [20,],'43' => [240,],'47' => [148,],],],
          
            '104' => ['var_27' => 30,'name' => "Cubone",'var_26' => 87,'var_16' => 50,'var_30' => 50,'var_23' => 95,'var_28' => 40,'var_24' => 50,'speed' => 35,'types' => [14,],'moves' => [5,],'unlocked_moves' => ['3' => [3,],'37' => [314,],'7' => [312,],'41' => [167,],'11' => [216,],'43' => [127,],'13' => [43,],'47' => [287,],'17' => [12,],'21' => [313,],'23' => [40,],'27' => [273,],'31' => [171,],],],
         
            '106' => ['var_27' => 75,'name' => "Hitmonlee",'var_26' => 139,'var_16' => 50,'var_30' => 120,'var_23' => 53,'var_28' => 35,'var_24' => 110,'speed' => 87,'types' => [13,],'moves' => [228,45,],'unlocked_moves' => ['33' => [236,],'5' => [209,],'37' => [227,],'9' => [356,],'41' => [253,],'13' => [358,],'45' => [359,],'17' => [270,],'49' => [354,],'21' => [12,],'53' => [360,],'25' => [168,],'57' => [290,],'29' => [357,],'61' => [104,],],],
            '107' => ['var_27' => 75,'name' => "Hitmonchan",'var_26' => 140,'var_16' => 50,'var_30' => 105,'var_23' => 79,'var_28' => 35,'var_24' => 110,'speed' => 76,'types' => [13,],'moves' => [228,361,],'unlocked_moves' => ['33' => [236,],'66' => [290,],'36' => [316,],'37' => [122,],'6' => [97,],'38' => [317,],'41' => [364,],'11' => [33,],'46' => [59,],'16' => [362,],'17' => [363,],'51' => [365,],'21' => [168,],'56' => [367,],'26' => [266,],'61' => [366,],'31' => [256,],],],
            '108' => ['var_27' => 75,'name' => "Lickitung",'var_26' => 127,'var_16' => 90,'var_30' => 55,'var_23' => 75,'var_28' => 60,'var_24' => 75,'speed' => 30,'types' => [5,],'moves' => [119,],'unlocked_moves' => ['33' => [68,],'5' => [38,],'37' => [88,],'9' => [25,],'41' => [350,],'13' => [131,],'45' => [393,],'17' => [70,],'49' => [72,],'21' => [327,],'53' => [399,],'25' => [49,],'57' => [283,],'29' => [125,],],],
            '109' => ['var_27' => 20,'name' => "Koffing",'var_26' => 114,'var_16' => 40,'var_30' => 65,'var_23' => 95,'var_28' => 60,'var_24' => 45,'speed' => 35,'types' => [2,],'moves' => [208,1,],'unlocked_moves' => ['33' => [221,],'19' => [410,],'51' => [311,],'37' => [160,],'6' => [334,],'55' => [387,],'24' => [144,],'10' => [17,],'42' => [238,],'28' => [381,],'46' => [382,],'15' => [96,],],],
          
            '111' => ['var_27' => 20,'name' => "Rhyhorn",'var_26' => 135,'var_16' => 80,'var_30' => 85,'var_23' => 95,'var_28' => 30,'var_24' => 30,'speed' => 25,'types' => [14,10,],'moves' => [80,3,],'unlocked_moves' => ['34' => [88,],'19' => [30,],'67' => [335,],'52' => [297,],'23' => [82,],'8' => [327,],'56' => [194,],'41' => [27,],'12' => [21,],'45' => [319,],'30' => [155,],'63' => [275,],],],
        
            '113' => ['var_27' => 100,'name' => "Chansey",'var_26' => 395,'var_16' => 250,'var_30' => 5,'var_23' => 5,'var_28' => 35,'var_24' => 105,'speed' => 50,'types' => [5,],'moves' => [25,48,5,],'unlocked_moves' => ['16' => [392,],'50' => [292,],'5' => [3,],'38' => [386,],'54' => [127,],'23' => [63,],'9' => [393,],'42' => [389,],'27' => [27,],'12' => [61,],'46' => [212,],'31' => [47,],],],
            '114' => ['var_27' => 20,'name' => "Tangela",'var_26' => 166,'var_16' => 65,'var_30' => 55,'var_23' => 115,'var_28' => 100,'var_24' => 40,'speed' => 60,'types' => [1,],'moves' => [401,201,],'unlocked_moves' => ['33' => [131,],'36' => [296,],'5' => [26,],'8' => [107,],'43' => [125,],'12' => [91,],'15' => [24,],'47' => [400,],'50' => [283,],'19' => [16,],'22' => [198,],'54' => [399,],'26' => [108,],'29' => [37,],],],
            '115' => ['var_27' => 50,'name' => "Kangaskhan",'var_26' => 175,'var_16' => 105,'var_30' => 95,'var_23' => 80,'var_28' => 40,'var_24' => 80,'speed' => 90,'types' => [5,],'moves' => [361,43,],'unlocked_moves' => ['34' => [395,],'37' => [84,],'7' => [175,],'10' => [3,],'43' => [354,],'13' => [19,],'46' => [325,],'49' => [35,],'19' => [293,],'22' => [40,],'55' => [104,],'25' => [59,],'31' => [88,],],],
            '116' => ['var_27' => 16,'name' => "Horsea",'var_26' => 83,'var_16' => 30,'var_30' => 40,'var_23' => 70,'var_28' => 70,'var_24' => 25,'speed' => 60,'types' => [3,],'moves' => [11,],'unlocked_moves' => ['18' => [112,],'35' => [193,],'4' => [17,],'38' => [243,],'23' => [97,],'8' => [43,],'26' => [77,],'42' => [349,],'11' => [31,],'14' => [12,],'30' => [328,],],],
     
            '118' => ['var_27' => 20,'name' => "Goldeen",'var_26' => 111,'var_16' => 45,'var_30' => 67,'var_23' => 60,'var_28' => 35,'var_24' => 50,'speed' => 63,'types' => [3,],'moves' => [42,3,109,],'unlocked_moves' => ['17' => [93,],'51' => [339,],'21' => [147,],'37' => [338,],'7' => [38,],'41' => [275,],'57' => [335,],'11' => [80,],'27' => [261,],'31' => [21,],'47' => [97,],],],
        
            '122' => ['var_27' => 60,'name' => "Mr. Mime",'var_26' => 136,'var_16' => 40,'var_30' => 45,'var_23' => 65,'var_28' => 100,'var_24' => 120,'speed' => 90,'types' => [17,],'moves' => [197,20,253,255,256,258,259,],'unlocked_moves' => ['18' => [214,],'50' => [129,],'4' => [215,],'22' => [212,],'23' => [146,],'39' => [148,],'8' => [209,],'25' => [89,],'11' => [60,],'29' => [213,],'46' => [262,],'15' => [61,],],],
            '123' => ['var_27' => 20,'name' => "Scyther",'var_26' => 187,'var_16' => 70,'var_30' => 110,'var_23' => 80,'var_28' => 55,'var_24' => 80,'speed' => 105,'types' => [7,6,],'moves' => [266,4,43,],'unlocked_moves' => ['33' => [267,],'5' => [12,],'37' => [79,],'9' => [33,],'41' => [268,],'13' => [273,],'45' => [181,],'17' => [97,],'49' => [293,],'21' => [75,],'53' => [246,],'25' => [55,],'57' => [180,],'29' => [130,],'61' => [168,],],],
            '124' => ['var_27' => 60,'name' => "Jynx",'var_26' => 137,'var_16' => 65,'var_30' => 50,'var_23' => 35,'var_28' => 115,'var_24' => 95,'speed' => 95,'types' => [12,17,],'moves' => [48,119,120,121,],'unlocked_moves' => ['33' => [86,],'49' => [283,],'18' => [122,],'21' => [123,],'39' => [195,],'55' => [324,],'28' => [140,],'44' => [114,],'60' => [204,],'15' => [61,],],],
            '125' => ['var_27' => 100,'name' => "Electabuzz",'var_26' => 156,'var_16' => 65,'var_30' => 83,'var_23' => 57,'var_28' => 95,'var_24' => 85,'speed' => 105,'types' => [11,],'moves' => [4,43,22,],'unlocked_moves' => ['16' => [69,],'32' => [41,],'50' => [142,],'21' => [416,],'38' => [316,],'56' => [72,],'26' => [212,],'11' => [51,],'44' => [219,],'62' => [202,],],],
          
            '127' => ['var_27' => 20,'name' => "Pinsir",'var_26' => 200,'var_16' => 65,'var_30' => 125,'var_23' => 100,'var_28' => 55,'var_24' => 70,'speed' => 85,'types' => [7,],'moves' => [269,12,],'unlocked_moves' => ['18' => [228,],'35' => [171,],'4' => [198,],'52' => [305,],'21' => [270,],'38' => [180,],'8' => [53,],'25' => [229,],'42' => [230,],'13' => [14,],'30' => [268,],'47' => [284,],],],
         
            '128' => ['var_27' => 20,'name' => "Tauros",'var_26' => 211,'var_16' => 75,'var_30' => 100,'var_23' => 95,'var_28' => 40,'var_24' => 70,'speed' => 110,'types' => [5,],'moves' => [1,],'unlocked_moves' => ['3' => [3,],'35' => [223,],'5' => [40,],'8' => [80,],'41' => [27,],'11' => [30,],'15' => [33,],'48' => [164,],'19' => [143,],'55' => [171,],'24' => [169,],'29' => [396,],'63' => [344,],],],
            '129' => ['var_27' => 1,'name' => "Magikarp",'var_26' => 20,'var_16' => 20,'var_30' => 10,'var_23' => 55,'var_28' => 15,'var_24' => 20,'speed' => 80,'types' => [3,],'moves' => [141,],'unlocked_moves' => ['30' => [147,],'15' => [1,],],],
         
            '131' => ['var_27' => 40,'name' => "Lapras",'var_26' => 219,'var_16' => 130,'var_30' => 85,'var_23' => 80,'var_28' => 85,'var_24' => 95,'speed' => 60,'types' => [3,12,],'moves' => [47,5,],'unlocked_moves' => ['32' => [346,],'49' => [193,],'18' => [114,],'37' => [328,],'22' => [111,],'7' => [81,],'55' => [347,],'10' => [345,],'27' => [324,],'43' => [129,],'14' => [93,],],],
            '132' => ['var_27' => 100,'name' => "Ditto",'var_26' => 61,'var_16' => 48,'var_30' => 48,'var_23' => 48,'var_28' => 48,'var_24' => 48,'speed' => 48,'types' => [5,],'moves' => [56,],'unlocked_moves' => [],],
            '133' => ['var_27' => 10,'name' => "Eevee",'var_26' => 92,'var_16' => 55,'var_30' => 55,'var_23' => 50,'var_28' => 45,'var_24' => 65,'speed' => 55,'types' => [5,],'moves' => [3,1,99,],'unlocked_moves' => ['50' => [295,],'36' => [262,],'22' => [4,],'8' => [2,],'57' => [333,],'43' => [27,],'29' => [19,],'15' => [5,],],],
           
            '137' => ['var_27' => 20,'name' => "Porygon",'var_26' => 130,'var_16' => 65,'var_30' => 60,'var_23' => 70,'var_28' => 85,'var_24' => 75,'speed' => 40,'types' => [5,],'moves' => [264,1,263,423,],'unlocked_moves' => ['18' => [115,],'51' => [251,],'7' => [89,],'23' => [234,],'40' => [219,],'56' => [331,],'12' => [97,],'29' => [265,],'45' => [278,],'62' => [336,],],],
            '138' => ['var_27' => 50,'name' => "Omanyte",'var_26' => 99,'var_16' => 35,'var_30' => 40,'var_23' => 100,'var_28' => 90,'var_24' => 55,'speed' => 35,'types' => [10,3,],'moves' => [201,18,],'unlocked_moves' => ['16' => [68,],'34' => [83,],'19' => [43,],'52' => [373,],'37' => [296,],'7' => [19,],'55' => [193,],'25' => [139,],'10' => [31,],'43' => [400,],'28' => [328,],'46' => [82,],],],
          
            '140' => ['var_27' => 50,'name' => "Kabuto",'var_26' => 99,'var_16' => 30,'var_30' => 80,'var_23' => 90,'var_28' => 55,'var_24' => 45,'speed' => 55,'types' => [10,3,],'moves' => [6,14,],'unlocked_moves' => ['16' => [139,],'51' => [283,],'36' => [108,],'21' => [2,],'6' => [107,],'41' => [299,],'26' => [354,],'11' => [43,],'46' => [296,],'31' => [378,],],],
          
            '142' => ['var_27' => 200,'name' => "Aerodactyl",'var_26' => 202,'var_16' => 80,'var_30' => 105,'var_23' => 65,'var_28' => 60,'var_24' => 75,'speed' => 130,'types' => [10,6,],'moves' => [156,92,249,75,38,19,30,],'unlocked_moves' => ['17' => [97,],'33' => [84,],'49' => [412,],'65' => [281,],'81' => [344,],'9' => [101,],'25' => [296,],'41' => [27,],'57' => [413,],'73' => [414,],],],
            '143' => ['var_27' => 20,'name' => "Snorlax",'var_26' => 154,'var_16' => 160,'var_30' => 110,'var_23' => 65,'var_28' => 65,'var_24' => 110,'speed' => 30,'types' => [5,],'moves' => [1,],'unlocked_moves' => ['33' => [342,],'4' => [25,],'36' => [114,],'9' => [337,],'12' => [119,],'44' => [68,],'17' => [152,],'49' => [84,],'20' => [340,],'52' => [343,],'25' => [88,],'57' => [344,],'28' => [143,],'29' => [341,],],],
            
            '147' => ['var_27' => 5,'name' => "Dratini",'var_26' => 67,'var_16' => 41,'var_30' => 64,'var_23' => 45,'var_28' => 50,'var_24' => 50,'speed' => 50,'types' => [15,],'moves' => [70,43,],'unlocked_moves' => ['35' => [133,],'51' => [243,],'5' => [23,],'21' => [125,],'55' => [325,],'25' => [97,],'41' => [272,],'11' => [77,],'45' => [129,],'61' => [281,],'15' => [29,],'31' => [271,],],],
            
            '150' => ['var_27' => 100,'name' => "Mewtwo",'var_26' => 220,'var_16' => 106,'var_30' => 110,'var_23' => 90,'var_28' => 154,'var_24' => 90,'speed' => 130,'types' => [17,],'moves' => [20,49,197,],'unlocked_moves' => ['64' => [148,],'100' => [424,],'71' => [350,],'8' => [69,],'43' => [196,],'15' => [286,],'79' => [115,],'50' => [337,],'22' => [210,],'86' => [129,],'57' => [259,],'58' => [258,],'29' => [117,],'93' => [417,],],],
            '151' => ['var_27' => 5000,'name' => "Mew",'var_26' => 64,'var_16' => 100,'var_30' => 100,'var_23' => 100,'var_28' => 100,'var_24' => 100,'speed' => 100,'types' => [17,],'moves' => [48,57,56,],'unlocked_moves' => ['80' => [262,],'50' => [296,],'20' => [58,],'100' => [417,],'70' => [350,],'40' => [197,],'10' => [59,],'90' => [191,],'60' => [337,],'30' => [148,],],]];

    
    private function getUniquePokemonId(HasMany $pokemon) {
        $valid = false;
        $tmp = -1;

        while (!$valid) {
            $tmp = mt_rand(1, 2147483647);
            $valid = true;

            foreach ($pokemon->select('pId')->lazy() as $poke) {
                if ($tmp == $poke->pId) {
                    $valid = false;
                    break;
                }
            }
        }

        return $tmp;
    }
    
    public function playSlots()
    {
        $prize = 0;
        $user = Auth::user();
        if ($user->casino_coins < 250) {
            return redirect()->back()->with(['return' => 250 - Auth::user()->casino_coins]);
        } 

        for ($i = 0; $i < 50; $i++) {

            $prize += mt_rand(1, 125);
        }   

        $user->casino_coins = $user->casino_coins + $prize - 250;
        $user->last_used_gc = Carbon::now('UTC');
        $user->save();

        return redirect()->back()->with([
            'prize' => $prize
        ]);
    }

    public function buyPokemon($id)
    {       
        $pokemon = GameCornerPokemon::find($id);
        $user = Auth::user();
        if ($user->casino_coins < $pokemon->cost) {
            return redirect()->back()->with(['return' => $pokemon->cost - $user->casino_coins]);
        } 

        $user->casino_coins = $user->casino_coins - $pokemon->cost;

        if ($pokemon->pNum == 0){
            $this->buyRandomShadowPokemon($pokemon);
        }
        else
        {
            $pokemon = new Pokemon([
                'save_id' => $user->selectedSave()->id,
                'pId' => $this->getUniquePokemonId(Save::whereId($user->selectedSave()->id)->first()->pokemon()),
                'pNum' => $pokemon->pNum,
                'nickname' => $pokemon->nickname,
                'exp' => $pokemon->exp,
                'lvl' => $pokemon->lvl,
                'm1' => $pokemon->m1,
                'm2' => $pokemon->m2,
                'm3' => $pokemon->m3,
                'm4' => $pokemon->m4,
                'ability' => $pokemon->ability,
                'mSel' => $pokemon->mSel,
                'targetType' => $pokemon->targetType,
                'tag' => 'n',
                'item' => 0,
                'owner' => 0,
                'pos' => 1,
                'shiny' => (mt_rand(1, 100) <= 1) ? 1 : $pokemon->shiny,   
            ]);
        }


            
        $user->save();
        
        $pokemon->save();

        return redirect()->back()->with(['id' => $pokemon->id, 'nickname' => $pokemon->nickname]);
    }

    public function buyRandomShadowPokemon($pokemon)
    {
        if (empty($pokemon)) {
            return redirect()->back();
        }

        $user = Auth::user();

        if ($user->casino_coins < $pokemon->cost) {
            return redirect()->back()->with(['return' => $pokemon->cost - $user->casino_coins]);
        } 

        $pNum = array_rand(self::$pokemons);

        $user->casino_coins = $user->casino_coins - $pokemon->cost;

        $pokemon = new Pokemon([
            'save_id' => $user->selectedSave()->id,
            'pId' => $this->getUniquePokemonId(Save::whereId($user->selectedSave()->id)->first()->pokemon()),
            'pNum' => $pNum,
            'nickname' => $pokemon[$pNum]['name'],
            'exp' => 0,
            'lvl' => 1,
            'm1' => 368,
            'm2' => 0,
            'm3' => 0,
            'm4' => 0,
            'ability' => 0,
            'mSel' => 1,
            'targetType' => 1,
            'tag' => 'n',
            'item' => 0,
            'owner' => 0,
            'pos' => 1,
            'shiny' => 2,   
        ]);

        $user->save();
        
        $pokemon->save();

        return redirect()->back()->with(['id' => $pokemon->id, 'nickname' => $pokemon->nickname]);
    }
}
